    //<MLS_ENTITY_LIGHTING_SAMLE_DIRECTIONAL_LIGHTMAP_ADDITIONS>
    //Original code
    /*real4 direction = SAMPLE_TEXTURE2D(lightmapDirTex, lightmapDirSampler, uv);
    // Remark: baked lightmap is RGBM for now, dynamic lightmap is RGB9E5
    real3 illuminance = real3(0.0, 0.0, 0.0);
    if (encodedLightmap)
    {
        real4 encodedIlluminance = SAMPLE_TEXTURE2D(lightmapTex, lightmapSampler, uv).rgba;
        illuminance = DecodeLightmap(encodedIlluminance, decodeInstructions);
    }
    else
    {
        illuminance = SAMPLE_TEXTURE2D(lightmapTex, lightmapSampler, uv).rgb;
    }*/    

    // Magic Lightmap Switcher
    real4 direction = lerp(
        SAMPLE_TEXTURE2D(lightmapDirTex, lightmapDirSampler, uv),
        BlendTwoTextures(1, uv),
        _MLS_ENABLE_LIGHTMAPS_BLENDING);    

    real3 illuminance = real3(0.0, 0.0, 0.0);

    if (encodedLightmap)
    {         
        real4 encodedIlluminance = lerp(
            SAMPLE_TEXTURE2D(lightmapTex, lightmapSampler, uv).rgba,
            BlendTwoTextures(0, uv).rgba,
            _MLS_ENABLE_LIGHTMAPS_BLENDING);        

        illuminance = DecodeLightmap(encodedIlluminance, decodeInstructions);        
    }
    else
    {        
       illuminance = lerp(
            SAMPLE_TEXTURE2D(lightmapTex, lightmapSampler, uv).rgb,
            BlendTwoTextures(0, uv).rgb,
            _MLS_ENABLE_LIGHTMAPS_BLENDING); 
    }  
    //</MLS_ENTITY_LIGHTING_SAMLE_DIRECTIONAL_LIGHTMAP_ADDITIONS>